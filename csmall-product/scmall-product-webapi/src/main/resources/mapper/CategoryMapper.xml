<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.tedu.csmall.product.webapi.mapper.CategoryMapper">
    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        insert into pms_category(
            name, parent_id, depth, keywords, sort,
            icon, enable, is_parent, is_display, gmt_create,
            gmt_modified
            ) VALUES (
            #{name}, #{parentId}, #{depth}, #{keywords}, #{sort},
            #{icon}, #{enable}, #{isParent}, #{isDisplay}, #{gmtCreate},
            #{gmtModified}
            )
    </insert>
    <select id="getByName" resultMap="SimpleResultMap">
        select <include refid="SimpleQueryFields"/> from pms_category where name=#{name}
    </select>
    <select id="getById" resultMap="SimpleResultMap">
        select <include refid="SimpleQueryFields"/> from pms_category where id=#{id}
    </select>
    <update id="updateIsParentById">
        update pms_category set is_parent=#{isParent} where id=#{id}
    </update>
    <sql id="SimpleQueryFields">
        <if test="true">
            id,depth,is_parent
        </if>
    </sql>
    <resultMap id="SimpleResultMap" type="cn.tedu.csmall.pojo.vo.CategorySimpleVO">
        <id column="id" property="id"/>
        <id column="depth" property="depth"/>
        <id column="is_parent" property="isParent"/>
    </resultMap>
</mapper>
